function __shadowenv_hook --on-event fish_prompt --on-variable PWD
  @SELF@ hook --fish \
    | while read line
      eval "$line" 2>/dev/null
    end
end
